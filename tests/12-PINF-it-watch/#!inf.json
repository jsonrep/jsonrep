#!/usr/bin/env inf
{
    "#": "gi0.PINF.it/core/v0",

    "#": {
        "jsonrep": "jsonrep"
    },

    ":builder:": "jsonrep @ builder/v0",


    "gi0.PINF.it/core/v0 @ # :builder: set() config": {
        "dist": ".dist/page/index.html",
        "prime": true,
        "page": {
            "@announcer": {
                "message": "Hello World!"
            }
        },
        "reps": {
            "announcer": "./announcer.rep.js",
            "sample": "./sample.rep.js"
        }
    },

    "gi0.PINF.it/core/v0 @ # :builder: run()": "",

    "# run": (run.bash.progress () >>>
        echo "-- 1 --"
        cat ./.dist/page/announcer.rep.js
        echo -e "\n-- 2 --"
        cat ./.dist/page/sample.rep.js
        echo -e "\n-- 3 --"
    <<<),

    "gi0.PINF.it/core/v0 @ # watch()": "",

    "# run": (run.bash.progress () >>>
        sed "-i" "" "-e" 's/PREFIX:1/PREFIX:2/g' ./announcer.rep.js
        sed "-i" "" "-e" 's/"append": "!"/"append": "!!!"/g' ./sample.rep.js
        sleep 1
        cat ./.dist/page/announcer.rep.js
        echo -e "\n-- 4 --"
        cat ./.dist/page/sample.rep.js
        echo -e "\n-- 5 --"
        sed "-i" "" "-e" 's/PREFIX:2/PREFIX:1/g' ./announcer.rep.js
        sed "-i" "" "-e" 's/"append": "!!!"/"append": "!"/g' ./sample.rep.js
        sleep 1
        cat ./.dist/page/announcer.rep.js
        echo -e "\n-- 6 --"
        cat ./.dist/page/sample.rep.js
        echo -e "\n-- 7 --"
    <<<),

    "gi0.PINF.it/core/v0 @ # unwatch()": ""
}